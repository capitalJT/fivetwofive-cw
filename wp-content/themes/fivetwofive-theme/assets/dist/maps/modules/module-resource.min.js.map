{"version":3,"sources":["modules/module-resource.js"],"names":["$","FTF","ScrollReveal","resourceModule","module","_classCallCheck","this","itemPerPage","dataset","paginationContainer","querySelector","animationConfig","mobile","duration","interval","reset","distance","_createClass","key","value","fetchResources","formInit","reveal","querySelectorAll","_this","addEventListener","event","preventDefault","_this2","requestURL","URL","restBase","searchParams","append","currentPage","search","type","ajax","url","href","done","data","textStatus","request","updateResources","generatePagination","getResponseHeader","_this3","resourcesWrap","innerHTML","forEach","resource","insertAdjacentHTML","createResource","animateResources","_resource$_embedded","_resource$_embedded$w","_resource$_embedded$w2","_resource$_embedded$w3","_resource$_embedded$w4","_resource$_embedded$w5","resourceHTML","concat","id","_embedded","media_details","sizes","source_url","link","title","rendered","date","ftf_formatted_date","totalPages","paginationNav","_this4","setupPaginationNav","generatePaginationLinks","insertAdjacentElement","Number","parseInt","currentTarget","page","document","createElement","classList","add","setAttribute","paginationHeading","textContent","paginationLinks","current","arguments","length","undefined","index","init","jQuery","FiveTwoFive"],"mappings":"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","file":"../../js/modules/module-resource.min.js","sourcesContent":["( function( $, FTF, ScrollReveal ) {\n\t'use strict';\n\n\tclass resourceModule {\n\t\tconstructor( module ) {\n\t\t\tthis.module = module;\n\t\t\tthis.itemPerPage = module.dataset.itemPerPage;\n\t\t\tthis.paginationContainer = module.querySelector( '.ftf-module__pagination-container' );\n\t\t\tthis.animationConfig = {\n\t\t\t\tmobile: false,\n\t\t\t\tduration: 1000,\n\t\t\t\tinterval: 300,\n\t\t\t\treset: false,\n\t\t\t\tdistance: '10px',\n\t\t\t};\n\t\t}\n\n\t\tinit() {\n\t\t\tthis.fetchResources();\n\t\t\tthis.formInit();\n\t\t}\n\n\t\tanimateResources() {\n\t\t\tScrollReveal().reveal( this.module.querySelectorAll( '.card' ), this.animationConfig );\n\t\t}\n\n\t\tformInit() {\n\t\t\tthis.module.querySelector( '.ftf-form' ).addEventListener( 'submit', ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.fetchResources();\n\t\t\t} );\n\t\t}\n\n\t\tfetchResources() {\n\t\t\tconst requestURL = new URL( FTF.restBase );\n\t\t\trequestURL.searchParams.append( '_fields', 'id,date_gmt,ftf_formatted_date,title,link,_links,_embedded' );\n\t\t\trequestURL.searchParams.append( 'per_page', this.itemPerPage );\n\t\t\trequestURL.searchParams.append( 'page', this.module.dataset.currentPage );\n\t\t\trequestURL.searchParams.append( '_embed', 'wp:featuredmedia' );\n\n\t\t\tconst search = this.module.querySelector( '[name=\"ftf-search-resource\"]' ).value;\n\t\t\tconst type = this.module.querySelector( '[name=\"ftf-type-resource\"]' ).value;\n\n\t\t\tif ( search ) {\n\t\t\t\trequestURL.searchParams.append( 'search', search );\n\t\t\t}\n\n\t\t\tif ( type && type !== '0' ) {\n\t\t\t\trequestURL.searchParams.append( 'ftf-resource-types', type );\n\t\t\t}\n\n\t\t\t$.ajax( { url: requestURL.href } )\n\t\t\t\t.done( ( data, textStatus, request ) => {\n\t\t\t\t\tif ( 'success' === textStatus ) {\n\t\t\t\t\t\tthis.updateResources( data );\n\t\t\t\t\t\tthis.generatePagination( request.getResponseHeader( 'X-WP-TotalPages' ) );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}\n\n\t\tupdateResources( data ) {\n\t\t\tconst resourcesWrap = this.module.querySelector( '.ftf-resources-wrap' );\n\n\t\t\tresourcesWrap.innerHTML = '';\n\n\t\t\tdata.forEach( ( resource ) => {\n\t\t\t\tresourcesWrap.insertAdjacentHTML( 'beforeend', this.createResource( resource ) );\n\t\t\t} );\n\n\t\t\tthis.animateResources();\n\t\t}\n\n\t\tcreateResource( resource ) {\n\t\t\tlet resourceHTML = '';\n\t\t\tif ( resource ) {\n\t\t\t\tresourceHTML = `\n          <div class=\"col-md-4 mb-3 mb-md-5\">\n            <article id=\"card-${ resource.id }\" class=\"card post-2990 ftf_resource type-ftf_resource status-publish has-post-thumbnail hentry ftf_resource_type-uncategorized\">`;\n\n\t\t\t\tif ( resource._embedded?.[ 'wp:featuredmedia' ]?.[ 0 ]?.media_details?.sizes?.[ 'ftf-resource-thumb' ]?.source_url ) {\n\t\t\t\t\tresourceHTML += `\n            <div class=\"card__top\">\n              <a class=\"card__image-link\" href=\"${ resource.link }\" aria-hidden=\"true\" tabindex=\"-1\">\n                <img width=\"415\" height=\"245\" src=\"${ resource._embedded[ 'wp:featuredmedia' ][ 0 ].media_details.sizes[ 'ftf-resource-thumb' ].source_url }\" class=\"card__image img-responsive wp-post-image\" alt=\"${ resource.title.rendered }\" loading=\"lazy\">\n              </a>\n            </div>`;\n\t\t\t\t}\n\n\t\t\t\tresourceHTML += `\n              <div class=\"card__bottom\">\n                <header class=\"card__header m-0\">\n                  <div class=\"ftf-post-meta entry-meta\"><span class=\"posted-on\"><a href=\"${ resource.link }\" rel=\"bookmark\"><time class=\"entry-date published\" datetime=\"${ resource.date }\">${ resource.ftf_formatted_date }</time></a></span></div>\n                  <h3 class=\"card__title mt-2\"><a href=\"${ resource.link }\">${ resource.title.rendered }</a></h3>\n                </header>\n\n                <footer class=\"card__footer mt-4\">\n                  <a class=\"button card__button\" href=\"${ resource.link }\" aria-hidden=\"true\" tabindex=\"-1\">Read More</a>\n                </footer>\n              </div>\n            </article>\n          </div>\n        `;\n\t\t\t}\n\t\t\treturn resourceHTML;\n\t\t}\n\n\t\tgeneratePagination( totalPages ) {\n\t\t\tthis.paginationContainer.innerHTML = '';\n\n\t\t\tif ( totalPages <= 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst currentPage = this.module.dataset.currentPage;\n\t\t\tconst paginationNav = this.setupPaginationNav();\n\t\t\tpaginationNav.querySelector( '.nav-links' ).innerHTML = this.generatePaginationLinks( currentPage, totalPages );\n\n\t\t\tthis.paginationContainer.insertAdjacentElement( 'beforeend', paginationNav );\n\n\t\t\tthis.module.querySelectorAll( '.page-numbers' ).forEach( ( link ) => {\n\t\t\t\tlink.addEventListener( 'click', ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.module.dataset.currentPage = Number.parseInt( event.currentTarget.dataset.page, 10 );\n\t\t\t\t\tthis.fetchResources();\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tsetupPaginationNav() {\n\t\t\tconst paginationNav = document.createElement( 'nav' );\n\t\t\tpaginationNav.classList.add( 'navigation', 'pagination' );\n\t\t\tpaginationNav.setAttribute( 'role', 'navigation' );\n\t\t\tpaginationNav.setAttribute( 'aria-label', 'Resources' );\n\n\t\t\tconst paginationHeading = document.createElement( 'h2' );\n\t\t\tpaginationHeading.classList.add( 'screen-reader-text' );\n\t\t\tpaginationHeading.textContent = 'Resources navigation';\n\n\t\t\tconst paginationLinks = document.createElement( 'div' );\n\t\t\tpaginationLinks.classList.add( 'nav-links' );\n\n\t\t\tpaginationNav.insertAdjacentElement( 'afterbegin', paginationHeading );\n\t\t\tpaginationNav.insertAdjacentElement( 'beforeend', paginationLinks );\n\n\t\t\treturn paginationNav;\n\t\t}\n\n\t\tgeneratePaginationLinks( current = 1, totalPages ) {\n\t\t\tlet paginationLinks = '';\n\t\t\tcurrent = Number.parseInt( current, 10 );\n\n\t\t\tfor ( let index = 1; index <= totalPages; index++ ) {\n\t\t\t\tif ( index === current ) {\n\t\t\t\t\tpaginationLinks += `<span aria-current=\"page\" class=\"page-numbers current\">${ index }</span>`;\n\t\t\t\t} else {\n\t\t\t\t\tpaginationLinks += `<a class=\"page-numbers\" data-page=\"${ index }\" href=\"#\">${ index }</a>`;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn paginationLinks;\n\t\t}\n\t}\n\n\t$( function() {\n\t\tconst modules = document.querySelectorAll( '.ftf-module-resources' );\n\n\t\tmodules.forEach( ( module ) => {\n\t\t\tconst singleResourceModule = new resourceModule( module );\n\t\t\tsingleResourceModule.init();\n\t\t} );\n\t} );\n}( jQuery, FiveTwoFive, ScrollReveal ) );\n"]}