{"version":3,"sources":["modules/module-resource.js"],"names":["$","FTF","ScrollReveal","resourceModule","module","_classCallCheck","this","itemPerPage","dataset","paginationContainer","querySelector","animationConfig","mobile","duration","interval","reset","distance","_createClass","key","value","formInit","paginationInit","reveal","querySelectorAll","_this","addEventListener","event","preventDefault","fetchResources","page","_this2","requestURL","URL","restBase","searchParams","append","search","category","_this$module$querySel","_this$module$querySel2","isLoading","ajax","url","href","done","data","textStatus","request","updateResources","generatePagination","getResponseHeader","always","isComplete","_this3","resourcesWrap","innerHTML","forEach","resource","insertAdjacentHTML","createResource","animateResources","_resource$_embedded","_resource$_embedded$w","_resource$_embedded$w2","_resource$_embedded$w3","_resource$_embedded$w4","_resource$_embedded$w5","resourceHTML","concat","id","_embedded","media_details","sizes","source_url","link","title","rendered","date","ftf_formatted_date","totalPages","currentPage","paginationNav","setupPaginationNav","generatePaginationLinks","insertAdjacentElement","document","createElement","classList","add","setAttribute","paginationHeading","textContent","paginationLinks","current","arguments","length","undefined","Number","parseInt","index","_this4","currentTarget","generateSpinner","removeAttribute","init","jQuery","FiveTwoFive"],"mappings":"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","file":"../../js/modules/module-resource.min.js","sourcesContent":["( function( $, FTF, ScrollReveal ) {\n\t'use strict';\n\n\tclass resourceModule {\n\t\tconstructor( module ) {\n\t\t\tthis.module = module;\n\t\t\tthis.itemPerPage = module.dataset.itemPerPage;\n\t\t\tthis.paginationContainer = module.querySelector( '.ftf-module__pagination-container' );\n\t\t\tthis.animationConfig = {\n\t\t\t\tmobile: false,\n\t\t\t\tduration: 1000,\n\t\t\t\tinterval: 300,\n\t\t\t\treset: false,\n\t\t\t\tdistance: '10px',\n\t\t\t};\n\t\t}\n\n\t\tinit() {\n\t\t\tthis.formInit();\n\t\t\tthis.paginationInit();\n\t\t}\n\n\t\tanimateResources() {\n\t\t\tScrollReveal().reveal( this.module.querySelectorAll( '.card' ), this.animationConfig );\n\t\t}\n\n\t\tformInit() {\n\t\t\tthis.module.querySelector( '.ftf-form' ).addEventListener( 'submit', ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.fetchResources( 1 );\n\t\t\t} );\n\t\t}\n\n\t\tfetchResources( page ) {\n\t\t\tconst requestURL = new URL( FTF.restBase );\n\t\t\trequestURL.searchParams.append( '_fields', 'id,date_gmt,ftf_formatted_date,title,link,_links,_embedded' );\n\t\t\trequestURL.searchParams.append( 'per_page', this.itemPerPage );\n\t\t\trequestURL.searchParams.append( 'page', page );\n\t\t\trequestURL.searchParams.append( '_embed', 'wp:featuredmedia' );\n\n\t\t\tconst search = this.module.querySelector( '[name=\"ftf-search-resource\"]' ).value;\n\t\t\tconst category = this.module.querySelector( '[name=\"ftf-category-resource\"]' )?.value ?? null;\n\n\t\t\tif ( search ) {\n\t\t\t\trequestURL.searchParams.append( 'search', search );\n\t\t\t}\n\n\t\t\tif ( category && category !== '0' ) {\n\t\t\t\trequestURL.searchParams.append( 'ftf-resource-categories', category );\n\t\t\t}\n\n\t\t\tthis.isLoading();\n\t\t\t$.ajax( { url: requestURL.href } )\n\t\t\t\t.done( ( data, textStatus, request ) => {\n\t\t\t\t\tif ( 'success' === textStatus ) {\n\t\t\t\t\t\tthis.updateResources( data );\n\t\t\t\t\t\tthis.generatePagination( request.getResponseHeader( 'X-WP-TotalPages' ) );\n\t\t\t\t\t}\n\t\t\t\t} ).always( () => {\n\t\t\t\t\tthis.isComplete();\n\t\t\t\t} );\n\t\t}\n\n\t\tupdateResources( data ) {\n\t\t\tconst resourcesWrap = this.module.querySelector( '.ftf-resources-wrap' );\n\n\t\t\tresourcesWrap.innerHTML = '';\n\n\t\t\tdata.forEach( ( resource ) => {\n\t\t\t\tresourcesWrap.insertAdjacentHTML( 'beforeend', this.createResource( resource ) );\n\t\t\t} );\n\n\t\t\tthis.animateResources();\n\t\t}\n\n\t\tcreateResource( resource ) {\n\t\t\tlet resourceHTML = '';\n\t\t\tif ( resource ) {\n\t\t\t\tresourceHTML = `\n          <div class=\"col-md-4 mb-3 mb-md-5\">\n            <article id=\"card-${ resource.id }\" class=\"card post-2990 ftf_resource type-ftf_resource status-publish has-post-thumbnail hentry load-hidden\">`;\n\n\t\t\t\tif ( resource._embedded?.[ 'wp:featuredmedia' ]?.[ 0 ]?.media_details?.sizes?.[ 'ftf-resource-thumb' ]?.source_url ) {\n\t\t\t\t\tresourceHTML += `\n\t\t\t\t\t\t<div class=\"card__top\">\n\t\t\t\t\t\t  <a class=\"card__image-link\" href=\"${ resource.link }\" aria-hidden=\"true\" tabindex=\"-1\">\n\t\t\t\t\t\t\t<img width=\"415\" height=\"245\" src=\"${ resource._embedded[ 'wp:featuredmedia' ][ 0 ].media_details.sizes[ 'ftf-resource-thumb' ].source_url }\" class=\"card__image img-responsive wp-post-image\" alt=\"${ resource.title.rendered }\" loading=\"lazy\">\n\t\t\t\t\t\t  </a>\n\t\t\t\t\t\t</div>`;\n\t\t\t\t}\n\n\t\t\t\tresourceHTML += `\n\t\t\t\t\t  <div class=\"card__bottom\">\n\t\t\t\t\t\t<header class=\"card__header m-0\">\n\t\t\t\t\t\t  <div class=\"ftf-post-meta entry-meta\"><span class=\"posted-on\"><a href=\"${ resource.link }\" rel=\"bookmark\"><time class=\"entry-date published\" datetime=\"${ resource.date }\">${ resource.ftf_formatted_date }</time></a></span></div>\n\t\t\t\t\t\t  <h3 class=\"card__title mt-2\"><a href=\"${ resource.link }\">${ resource.title.rendered }</a></h3>\n\t\t\t\t\t\t</header>\n\t\t\n\t\t\t\t\t\t<footer class=\"card__footer mt-4\">\n\t\t\t\t\t\t  <a class=\"button card__button\" href=\"${ resource.link }\" aria-hidden=\"true\" tabindex=\"-1\">Read More</a>\n\t\t\t\t\t\t</footer>\n\t\t\t\t\t  </div>\n\t\t\t\t\t</article>\n\t\t\t\t  </div>\n\t\t\t\t`;\n\t\t\t}\n\t\t\treturn resourceHTML;\n\t\t}\n\n\t\tgeneratePagination( totalPages ) {\n\t\t\tthis.paginationContainer.innerHTML = '';\n\n\t\t\tif ( totalPages <= 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst currentPage = this.module.dataset.currentPage;\n\t\t\tconst paginationNav = this.setupPaginationNav();\n\t\t\tpaginationNav.querySelector( '.nav-links' ).innerHTML = this.generatePaginationLinks( currentPage, totalPages );\n\n\t\t\tthis.paginationContainer.insertAdjacentElement( 'beforeend', paginationNav );\n\n\t\t\tthis.paginationInit();\n\t\t}\n\n\t\tsetupPaginationNav() {\n\t\t\tconst paginationNav = document.createElement( 'nav' );\n\t\t\tpaginationNav.classList.add( 'navigation', 'pagination' );\n\t\t\tpaginationNav.setAttribute( 'role', 'navigation' );\n\t\t\tpaginationNav.setAttribute( 'aria-label', 'Resources' );\n\n\t\t\tconst paginationHeading = document.createElement( 'h2' );\n\t\t\tpaginationHeading.classList.add( 'screen-reader-text' );\n\t\t\tpaginationHeading.textContent = 'Resources navigation';\n\n\t\t\tconst paginationLinks = document.createElement( 'div' );\n\t\t\tpaginationLinks.classList.add( 'nav-links' );\n\n\t\t\tpaginationNav.insertAdjacentElement( 'afterbegin', paginationHeading );\n\t\t\tpaginationNav.insertAdjacentElement( 'beforeend', paginationLinks );\n\n\t\t\treturn paginationNav;\n\t\t}\n\n\t\tgeneratePaginationLinks( current = 1, totalPages ) {\n\t\t\tlet paginationLinks = '';\n\t\t\tcurrent = Number.parseInt( current, 10 );\n\n\t\t\tfor ( let index = 1; index <= totalPages; index++ ) {\n\t\t\t\tif ( index === current ) {\n\t\t\t\t\tpaginationLinks += `<span aria-current=\"page\" class=\"page-numbers current\">${ index }</span>`;\n\t\t\t\t} else {\n\t\t\t\t\tpaginationLinks += `<a class=\"page-numbers\" data-page=\"${ index }\" href=\"#\">${ index }</a>`;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn paginationLinks;\n\t\t}\n\n\t\tpaginationInit() {\n\t\t\tthis.module.querySelectorAll( '.page-numbers' ).forEach( ( link ) => {\n\t\t\t\tlink.addEventListener( 'click', ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst currentPage = Number.parseInt( event.currentTarget.dataset.page, 10 );\n\t\t\t\t\tthis.module.dataset.currentPage = currentPage;\n\t\t\t\t\tthis.fetchResources( currentPage );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tgenerateSpinner() {\n\t\t\treturn `<div class=\"fivetwofive-spinner\"><div></div><div></div></div>`;\n\t\t}\n\n\t\tisLoading() {\n\t\t\tconst resourcesWrap = this.module.querySelector( '.ftf-resources-wrap' );\n\n\t\t\tthis.module.querySelector( 'input[type=\"submit\"]' ).setAttribute( 'disabled', 'disabled' );\n\t\t\tresourcesWrap.innerHTML = this.generateSpinner();\n\t\t}\n\n\t\tisComplete() {\n\t\t\tthis.module.querySelector( 'input[type=\"submit\"]' ).removeAttribute( 'disabled' );\n\t\t}\n\t}\n\n\t$( function() {\n\t\tconst modules = document.querySelectorAll( '.ftf-module-resources' );\n\n\t\tmodules.forEach( ( module ) => {\n\t\t\tconst singleResourceModule = new resourceModule( module );\n\t\t\tsingleResourceModule.init();\n\t\t} );\n\t} );\n}( jQuery, FiveTwoFive, ScrollReveal ) );\n"]}