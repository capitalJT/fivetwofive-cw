"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(r,i,e){var t=function(){function t(e){_classCallCheck(this,t),this.module=e,this.itemPerPage=e.dataset.itemPerPage,this.paginationContainer=e.querySelector(".ftf-module__pagination-container"),this.animationConfig={mobile:!1,duration:1e3,interval:300,reset:!1,distance:"10px"}}return _createClass(t,[{key:"init",value:function(){this.formInit(),this.paginationInit()}},{key:"animateResources",value:function(){e().reveal(this.module.querySelectorAll(".card"),this.animationConfig)}},{key:"formInit",value:function(){var t=this;this.module.querySelector(".ftf-form").addEventListener("submit",function(e){e.preventDefault(),t.fetchResources(1)})}},{key:"fetchResources",value:function(e){var n=this,t=new URL(i.restBase);t.searchParams.append("_fields","id,date_gmt,ftf_formatted_date,title,link,_links,_embedded"),t.searchParams.append("per_page",this.itemPerPage),t.searchParams.append("page",e),t.searchParams.append("_embed","wp:featuredmedia");var a=this.module.querySelector('[name="ftf-search-resource"]').value,e=null!==(e=null===(e=this.module.querySelector('[name="ftf-category-resource"]'))||void 0===e?void 0:e.value)&&void 0!==e?e:null;a&&t.searchParams.append("search",a),e&&"0"!==e&&t.searchParams.append("ftf-resource-categories",e),this.isLoading(),r.ajax({url:t.href}).done(function(e,t,a){"success"===t&&(n.updateResources(e),n.generatePagination(a.getResponseHeader("X-WP-TotalPages")))}).always(function(){n.isComplete()})}},{key:"updateResources",value:function(e){var t=this,a=this.module.querySelector(".ftf-resources-wrap");a.innerHTML="",e.forEach(function(e){a.insertAdjacentHTML("beforeend",t.createResource(e))}),this.animateResources()}},{key:"createResource",value:function(e){var t,a,n,r,i,s,o="";return e&&(o='\n          <div class="col-md-4 mb-3 mb-md-5">\n            <article id="card-'.concat(e.id,'" class="card post-2990 ftf_resource type-ftf_resource status-publish has-post-thumbnail hentry load-hidden">'),null!==(t=e._embedded)&&void 0!==t&&null!==(a=t["wp:featuredmedia"])&&void 0!==a&&null!==(n=a[0])&&void 0!==n&&null!==(r=n.media_details)&&void 0!==r&&null!==(i=r.sizes)&&void 0!==i&&null!==(s=i["ftf-resource-thumb"])&&void 0!==s&&s.source_url&&(o+='\n\t\t\t\t\t\t<div class="card__top">\n\t\t\t\t\t\t  <a class="card__image-link" href="'.concat(e.link,'" aria-hidden="true" tabindex="-1">\n\t\t\t\t\t\t\t<img width="415" height="245" src="').concat(e._embedded["wp:featuredmedia"][0].media_details.sizes["ftf-resource-thumb"].source_url,'" class="card__image img-responsive wp-post-image" alt="').concat(e.title.rendered,'" loading="lazy">\n\t\t\t\t\t\t  </a>\n\t\t\t\t\t\t</div>')),o+='\n\t\t\t\t\t  <div class="card__bottom">\n\t\t\t\t\t\t<header class="card__header m-0">\n\t\t\t\t\t\t  <div class="ftf-post-meta entry-meta"><span class="posted-on"><a href="'.concat(e.link,'" rel="bookmark"><time class="entry-date published" datetime="').concat(e.date,'">').concat(e.ftf_formatted_date,'</time></a></span></div>\n\t\t\t\t\t\t  <h3 class="card__title mt-2"><a href="').concat(e.link,'">').concat(e.title.rendered,'</a></h3>\n\t\t\t\t\t\t</header>\n\t\t\n\t\t\t\t\t\t<footer class="card__footer mt-4">\n\t\t\t\t\t\t  <a class="button card__button" href="').concat(e.link,'" aria-hidden="true" tabindex="-1">Read More</a>\n\t\t\t\t\t\t</footer>\n\t\t\t\t\t  </div>\n\t\t\t\t\t</article>\n\t\t\t\t  </div>\n\t\t\t\t')),o}},{key:"generatePagination",value:function(e){var t,a;this.paginationContainer.innerHTML="",e<=1||(t=this.module.dataset.currentPage,(a=this.setupPaginationNav()).querySelector(".nav-links").innerHTML=this.generatePaginationLinks(t,e),this.paginationContainer.insertAdjacentElement("beforeend",a),this.paginationInit())}},{key:"setupPaginationNav",value:function(){var e=document.createElement("nav");e.classList.add("navigation","pagination"),e.setAttribute("role","navigation"),e.setAttribute("aria-label","Resources");var t=document.createElement("h2");t.classList.add("screen-reader-text"),t.textContent="Resources navigation";var a=document.createElement("div");return a.classList.add("nav-links"),e.insertAdjacentElement("afterbegin",t),e.insertAdjacentElement("beforeend",a),e}},{key:"generatePaginationLinks",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length?arguments[1]:void 0,a="",e=Number.parseInt(e,10),n=1;n<=t;n++)a+=n===e?'<span aria-current="page" class="page-numbers current">'.concat(n,"</span>"):'<a class="page-numbers" data-page="'.concat(n,'" href="#">').concat(n,"</a>");return a}},{key:"paginationInit",value:function(){var t=this;this.module.querySelectorAll(".page-numbers").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();e=Number.parseInt(e.currentTarget.dataset.page,10);t.module.dataset.currentPage=e,t.fetchResources(e)})})}},{key:"generateSpinner",value:function(){return'<div class="fivetwofive-spinner"><div></div><div></div></div>'}},{key:"isLoading",value:function(){var e=this.module.querySelector(".ftf-resources-wrap");this.module.querySelector('input[type="submit"]').setAttribute("disabled","disabled"),e.innerHTML=this.generateSpinner()}},{key:"isComplete",value:function(){this.module.querySelector('input[type="submit"]').removeAttribute("disabled")}}]),t}();r(function(){document.querySelectorAll(".ftf-module-resources").forEach(function(e){new t(e).init()})})}(jQuery,FiveTwoFive,ScrollReveal);
//# sourceMappingURL=../../maps/modules/module-resource.min.js.map
